import os

# --- CONFIGURACIÓN DEL ÁLBUM ---
TITULO_ALBUM = 'Suite "Monte Adentro"' 
SUBTITULO = "Composición Cinemática de Degnis Romero"
COLOR_ACCENTO = "#ff9e7d"  
ID_GTM = "GTM-MNK5FR7B"
# Intentaremos forzar la carga de la imagen
IMAGEN_FONDO = "background.jpg" 

def generar_html():
    archivos_mp3 = [f for f in os.listdir('.') if f.endswith('.mp3')]
    archivos_mp3.sort()

    items_html = ""
    for pista in archivos_mp3:
        nombre_pista = pista.replace('.mp3', '').replace('_', ' ')
        items_html += f"""
        <div class="track">
            <p>{nombre_pista}</p>
            <audio controls>
                <source src="{pista}" type="audio/mpeg">
            </audio>
        </div>
        """

    html_content = f"""
    <!DOCTYPE html>
    <html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>{TITULO_ALBUM}</title>
        <style>
            body {{
                /* Forzamos la carga de la imagen con una ruta relativa directa */
                background-image: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url('./{IMAGEN_FONDO}');
                background-size: cover;
                background-position: center;
                background-attachment: fixed;
                background-color: #1a1a1a; /* Fondo de seguridad si falla la imagen */
                color: white;
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                display: flex;
                flex-direction: column;
                align-items: center;
                min-height: 100vh;
                margin: 0;
                padding: 40px 20px;
            }}
            h1 {{ font-size: 2.8em; letter-spacing: 4px; text-transform: uppercase; text-shadow: 3px 3px 15px rgba(0,0,0,0.9); text-align: center; }}
            h2 {{ color: {COLOR_ACCENTO}; font-weight: 300; margin-bottom: 40px; text-shadow: 1px 1px 5px rgba(0,0,0,0.8); text-align: center; font-style: italic; }}
            .container {{ width: 100%; max-width: 750px; }}
            .track {{
                background: rgba(40, 40, 40, 0.4); 
                backdrop-filter: blur(15px); 
                -webkit-backdrop-filter: blur(15px);
                margin-bottom: 25px;
                padding: 30px;
                border-radius: 15px;
                border: 1px solid rgba(255,255,255,0.08);
                box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            }}
            .track p {{ margin: 0 0 15px 0; font-size: 1.1em; letter-spacing: 1px; color: #eee; }}
            audio {{ width: 100%; filter: invert(100%) hue-rotate(180deg) brightness(1.5); opacity: 0.9; }}
            footer {{ margin-top: auto; padding: 40px; font-size: 0.8em; opacity: 0.5; letter-spacing: 2px; }}
        </style>
    </head>
    <body>
        <h1>{TITULO_ALBUM}</h1>
        <h2>{SUBTITULO}</h2>
        <div class="container">
            {items_html}
        </div>
        <footer>DEGNIS ROMERO &copy; 2026</footer>
    </body>
    </html>
    """

    with open("index.html", "w", encoding="utf-8") as f:
        f.write(html_content)
    print("¡Sistema reiniciado y optimizado!")

if __name__ == "__main__":
    generar_html()
    
